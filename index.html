<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Mi Blog P√∫blico</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="estilo.css">
</head>
<body>
  <div class="container py-4">
    <h1 class="mb-4 text-primary">üåç Blog P√∫blico</h1>

    <div id="posts" class="mb-4"></div>

    <div class="card p-3">
      <h2 class="h4 mb-3">Conexiones</h2>
      <ul id="socials" class="list-unstyled"></ul>
    </div>

    <a href="admin.html" class="btn btn-secondary mt-3">‚öôÔ∏è Ir al Panel de Administraci√≥n</a>
  </div>

  <script>
    const postsDiv = document.getElementById("posts");
    const entradas = JSON.parse(localStorage.getItem("entradas")) || [];

    if (entradas.length === 0) {
      postsDiv.innerHTML = "<p>No hay entradas a√∫n.</p>";
    } else {
      entradas.forEach(e => {
        let post = document.createElement("div");
        post.className = "card p-3 mb-3";
        post.innerHTML = `
          <h2 class="h5">${e.titulo}</h2>
          <div class="text-muted small mb-2">${e.fecha} ‚Äî ${e.tipo}</div>
          <p>${e.contenido}</p>
        `;
        if (e.tipo === "youtube" && e.url) {
          const id = e.url.split("v=")[1] || e.url.split("/").pop();
          post.innerHTML += `<div class="ratio ratio-16x9"><iframe src="https://www.youtube.com/embed/${id}" allowfullscreen></iframe></div>`;
        }
        if (e.tipo === "twitch" && e.url) {
          const canal = e.url.split("/").pop();
          post.innerHTML += `<div class="ratio ratio-16x9"><iframe src="https://player.twitch.tv/?channel=${canal}&parent=${location.hostname}" allowfullscreen></iframe></div>`;
        }
        if (e.tipo === "imagen" && e.url) {
          post.innerHTML += `<img src="${e.url}" class="img-fluid rounded mt-2">`;
        }
        postsDiv.appendChild(post);
      });
    }

    const redes = JSON.parse(localStorage.getItem("redes")) || {};
    const socialsList = document.getElementById("socials");
    for (let [key, value] of Object.entries(redes)) {
      if (value) {
        let li = document.createElement("li");
        li.innerHTML = `<a href="${value}" target="_blank" class="text-primary">${key}</a>`;
        socialsList.appendChild(li);
      }
    }
  </script>
</body>
</html>
