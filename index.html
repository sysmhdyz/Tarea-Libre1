<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>üåç Blog P√∫blico</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="estilo.css">
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg">
    <div class="container">
      <a class="navbar-brand" href="#">üåç Mi Blog</a>
      <div>
        <a href="admin.html" class="btn btn-custom">‚öôÔ∏è Admin</a>
      </div>
    </div>
  </nav>

  <div class="container py-4">
    <h1 class="mb-4 text-center text-accent">√öltimas Entradas</h1>
    <div id="posts" class="row gy-4"></div>

    <!-- Redes -->
    <div class="card p-3 mt-4">
      <h2 class="h4 mb-3">Conexiones</h2>
      <ul id="socials" class="list-unstyled"></ul>
    </div>
  </div>

  <script>
    const postsDiv = document.getElementById("posts");
    const entradas = JSON.parse(localStorage.getItem("entradas")) || [];

    if (entradas.length === 0) {
      postsDiv.innerHTML = "<p>No hay entradas a√∫n.</p>";
    } else {
      entradas.forEach(e => {
        let col = document.createElement("div");
        col.className = "col-md-6";

        let card = document.createElement("div");
        card.className = "card p-3 h-100";

        card.innerHTML = `
          <h2 class="post-title h5">${e.titulo}</h2>
          <div class="meta mb-2">${e.fecha} ‚Äî ${e.tipo}</div>
          <p>${e.contenido}</p>
        `;

        if (e.tipo === "youtube" && e.url) {
          const id = e.url.split("v=")[1] || e.url.split("/").pop();
          card.innerHTML += `<div class="ratio ratio-16x9 mb-2"><iframe src="https://www.youtube.com/embed/${id}" allowfullscreen></iframe></div>`;
        }
        if (e.tipo === "twitch" && e.url) {
          const canal = e.url.split("/").pop();
          card.innerHTML += `<div class="ratio ratio-16x9 mb-2"><iframe src="https://player.twitch.tv/?channel=${canal}&parent=${location.hostname}" allowfullscreen></iframe></div>`;
        }
        if (e.tipo === "imagen" && e.url) {
          card.innerHTML += `<img src="${e.url}" class="img-fluid rounded mb-2">`;
        }

        col.appendChild(card);
        postsDiv.appendChild(col);
      });
    }

    const redes = JSON.parse(localStorage.getItem("redes")) || {};
    const socialsList = document.getElementById("socials");
    for (let [key, value] of Object.entries(redes)) {
      if (value) {
        let li = document.createElement("li");
        li.innerHTML = `<a href="${value}" target="_blank" class="text-accent">${key}</a>`;
        socialsList.appendChild(li);
      }
    }
  </script>
</body>
</html>
