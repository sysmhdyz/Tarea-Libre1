<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Mi Blog P√∫blico</title>
  <link rel="stylesheet" href="estilo.css">
</head>
<body>
  <div class="container">
    <h1>üåç Blog P√∫blico</h1>
    <div id="posts"></div>

    <div class="card">
      <h2>Conexiones</h2>
      <ul id="socials"></ul>
    </div>

    <p><a href="admin.html">‚öôÔ∏è Ir al Panel de Administraci√≥n</a></p>
  </div>

  <script>
    const postsDiv = document.getElementById("posts");
    const entradas = JSON.parse(localStorage.getItem("entradas")) || [];

    if (entradas.length === 0) {
      postsDiv.innerHTML = "<p>No hay entradas a√∫n.</p>";
    } else {
      entradas.forEach(e => {
        let post = document.createElement("div");
        post.className = "post";
        post.innerHTML = `
          <h2>${e.titulo}</h2>
          <div class="meta">${e.fecha} ‚Äî ${e.tipo}</div>
          <p>${e.contenido}</p>
        `;
        if (e.tipo === "youtube" && e.url) {
          const id = e.url.split("v=")[1] || e.url.split("/").pop();
          post.innerHTML += `<iframe width="300" height="200" src="https://www.youtube.com/embed/${id}" frameborder="0" allowfullscreen></iframe>`;
        }
        if (e.tipo === "twitch" && e.url) {
          const canal = e.url.split("/").pop();
          post.innerHTML += `<iframe src="https://player.twitch.tv/?channel=${canal}&parent=${location.hostname}" frameborder="0" allowfullscreen="true" scrolling="no" height="200" width="300"></iframe>`;
        }
        if (e.tipo === "imagen" && e.url) {
          post.innerHTML += `<img src="${e.url}" width="300">`;
        }
        postsDiv.appendChild(post);
      });
    }

    const redes = JSON.parse(localStorage.getItem("redes")) || {};
    const socialsList = document.getElementById("socials");
    for (let [key, value] of Object.entries(redes)) {
      if (value) {
        let li = document.createElement("li");
        li.innerHTML = `<a href="${value}" target="_blank">${key}</a>`;
        socialsList.appendChild(li);
      }
    }
  </script>
</body>
</html>
